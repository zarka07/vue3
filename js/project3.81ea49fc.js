"use strict";(self["webpackChunkvue3"]=self["webpackChunkvue3"]||[]).push([[582,179],{4953:function(t,e,n){n.d(e,{Z:function(){return f}});var r=n(3396),a=n(7139);const i={class:"d.flex d-flex justify-content-between align-items-center mb-1 flex-wrap"},s={style:{"margin-left":"1rem"}},o={class:"btn"},l={class:"bi bi-cart",style:{"margin-top":"8px","margin-right":"1rem"}};function c(t,e,n,c,u,d){const p=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("header",null,[(0,r._)("div",i,[(0,r._)("div",s,[(0,r._)("h4",null,[(0,r.Wm)(p,{to:{name:"Project3"}},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(u.sitename),1)])),_:1})])]),(0,r._)("div",null,[(0,r._)("button",o,[(0,r.Wm)(p,{"active-class":"active",to:{name:"Form"}},{default:(0,r.w5)((()=>[(0,r._)("p",l,(0,a.zw)(this.userStore.CURRENT_ITEMS_COUNT??0),1)])),_:1})])])])])}var u=n(4573),d={name:"my-header",setup(){const t=(0,u.U)();return{userStore:t}},data(){return{sitename:"Распродажа склада!"}},methods:{showCheckout(){this.$router.push({name:"Form"})}}},p=n(89);const m=(0,p.Z)(d,[["render",c],["__scopeId","data-v-ad5e9118"]]);var f=m},475:function(t,e,n){n.r(e),n.d(e,{default:function(){return W}});var r=n(3396),a=n(9242),i=n(7139);const s=t=>((0,r.dD)("data-v-c8f760a4"),t=t(),(0,r.Cn)(),t),o={class:"m-3"},l={class:"d-grid gap-2 d-md-flex justify-content-md-start"},c=s((()=>(0,r._)("hr",null,null,-1))),u={class:"row"},d={class:"col-md-4 col-md-offset-0"},p=["src"],m={class:"col-md-8 col-md-offset-0 description"},f={class:"price"},g={class:"rating"},h=s((()=>(0,r._)("span",null,"Состояние товара: ",-1))),v=s((()=>(0,r._)("br",null,null,-1))),w={class:"d-flex mt-4 flex-wrap align-content-around"},_=["onClick"],y={key:1,disabled:"true",class:"btn btn-light"},b={key:2,class:"inventory-message"},k={key:3,class:"inventory-message"},C={key:4,class:"inventory-message"},D=s((()=>(0,r._)("hr",null,null,-1)));function x(t,e,n,s,x,I){const P=(0,r.up)("my-header"),j=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(P),(0,r._)("main",o,[(0,r._)("div",l,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>x.filter=t),type:"text",placeholder:"Фильтр"},null,512),[[a.nr,x.filter]]),x.page>1?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn btn-primary me-md-2",type:"button",onClick:e[1]||(e[1]=t=>x.page--)}," Назад ")):(0,r.kq)("",!0),x.hasNextPage?((0,r.wg)(),(0,r.iD)("button",{key:1,class:"btn btn-primary me-md-2",type:"button",onClick:e[2]||(e[2]=t=>x.page++)}," Вперед ")):(0,r.kq)("",!0)]),c,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(I.filteredList(),(t=>((0,r.wg)(),(0,r.iD)("div",{key:t.id},[(0,r._)("div",u,[(0,r._)("div",d,[(0,r._)("figure",null,[(0,r._)("img",{class:"product",src:t.image},null,8,p)])]),(0,r._)("div",m,[(0,r._)("h3",null,[(0,r.Wm)(j,{to:{name:"ProductId",params:{id:t.id}}},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(t.title),1)])),_:2},1032,["to"])]),(0,r._)("p",f,"Цена: "+(0,i.zw)(t.price||I.formatPrice)+" грн",1),(0,r._)("div",g,[h,((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(5,(e=>(0,r._)("span",{class:(0,i.C_)({"rating-active":I.checkRating(e,t)}),key:e},"☆",2))),64))]),v,(0,r._)("div",w,[I.canAddToCart(t)?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn add-btn",onClick:e=>I.addToCart(t)}," Добавить в корзину ",8,_)):((0,r.wg)(),(0,r.iD)("button",y," Добавить в корзину ")),t.availableInventory-I.cartCount(t.id)===0?((0,r.wg)(),(0,r.iD)("span",b,"Товар закончился ")):t.availableInventory-I.cartCount(t.id)<5?((0,r.wg)(),(0,r.iD)("div",k," Осталось: "+(0,i.zw)(t.availableInventory-I.cartCount(t.id))+" шт! ",1)):((0,r.wg)(),(0,r.iD)("span",C,"Купить сейчас! "))])])]),D])))),128))])])}var I=n(4953),P=n(6265),j=n.n(P),L=n(4573),S={name:"main-component",data(){return{products:[],filter:"",page:1,hasNextPage:!0}},components:{MyHeader:I.Z},setup(){const t=(0,L.U)();return{userStore:t}},methods:{filteredList(){const t=4*(this.page-1),e=4*this.page-1,n=this.products.filter((t=>t.title.toLowerCase().includes(this.filter)));return this.hasNextPage=n.length>e,n.slice(t,e)},formatPrice(t){if(!parseInt(t))return"";if(t>99999){var e=(t/100).toFixed(2),n=e.split("").reverse(),r=3;while(n.length>r+3)n.splice(r+3,0,","),r+=4;return n.reverse().join("")}return(t/100).toFixed(2)},checkRating(t,e){return e.rating-t>=0},addToCart(t){this.userStore.addToCart(t.id)},canAddToCart(t){return t.availableInventory>this.cartCount(t.id)},cartCount(t){let e=0;for(let n=0;n<this.userStore.cartItems.length;n++)this.userStore.cartItems[n]===t&&e++;return e}},computed:{sortedProducts(){function t(t,e){return t.title.toLowerCase()<e.title.toLowerCase()?-1:t.title.toLowerCase()>e.title.toLowerCase()?1:0}if(Object.keys(this.products).length>0){let e=this.products.slice(0);return e.sort(t)}return 0}},created:async function(){await j().get("products.json").then((t=>{this.products=t.data.products}));const t=Object.fromEntries(new URL(window.location).searchParams.entries());t.filter&&(this.filter=t.filter),t.page&&(this.page=t.page)},watch:{filter(){this.page=1,window.history.pushState(null,document.title,`/?filter=${this.filter}&page=${this.page}`)}}},T=n(89);const U=(0,T.Z)(S,[["render",x],["__scopeId","data-v-c8f760a4"]]);var W=U},9918:function(t,e,n){n.r(e),n.d(e,{default:function(){return d}});var r=n(3396);function a(t,e,n,a,i,s){const o=(0,r.up)("Header"),l=(0,r.up)("Main"),c=(0,r.up)("Footer");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(o),(0,r._)("div",null,[(0,r.Wm)(l)]),(0,r.Wm)(c)])}var i=n(3954),s=n(1375),o=n(475),l={name:"project3-component",components:{Header:i.Z,Main:o["default"],Footer:s.Z}},c=n(89);const u=(0,c.Z)(l,[["render",a]]);var d=u}}]);
//# sourceMappingURL=project3.81ea49fc.js.map