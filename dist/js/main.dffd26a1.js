"use strict";(self["webpackChunkvue3"]=self["webpackChunkvue3"]||[]).push([[179],{7433:function(t,e,r){r.d(e,{Z:function(){return g}});var n=r(3396),a=r(7139);const s={class:"d.flex d-flex justify-content-between align-items-center mb-1 flex-wrap"},o={style:{"margin-left":"1rem"}},i={class:""},c={class:"btn"},l={class:"bi bi-cart",style:{"margin-top":"8px","margin-right":"1rem"}};function u(t,e,r,u,d,m){const p=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("header",null,[(0,n._)("div",s,[(0,n._)("div",o,[(0,n._)("h4",null,[(0,n.Wm)(p,{to:{name:"Project3"}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(d.sitename),1)])),_:1})])]),(0,n._)("div",i,[(0,n._)("button",c,[(0,n.Wm)(p,{"active-class":"active",to:{name:"Form"}},{default:(0,n.w5)((()=>[(0,n._)("p",l,(0,a.zw)(this.userStore.cartItemCount.length),1)])),_:1})])])])])}var d=r(4573),m={name:"my-header",setup(){const t=(0,d.U)();return{userStore:t}},data(){return{sitename:"Распродажа склада!"}},methods:{showCheckout(){this.$router.push({name:"Form"})}}},p=r(89);const v=(0,p.Z)(m,[["render",u],["__scopeId","data-v-717cc7a8"]]);var g=v},3391:function(t,e,r){r.r(e),r.d(e,{default:function(){return P}});var n=r(3396),a=r(7139);const s=t=>((0,n.dD)("data-v-6e86fe90"),t=t(),(0,n.Cn)(),t),o={class:"m-3"},i={class:"row"},c={class:"col-md-4 col-md-offset-0"},l=["src"],u={class:"col-md-8 col-md-offset-0 description"},d=["innerHTML"],m={class:"price"},p={class:"rating"},v=s((()=>(0,n._)("span",null,"Состояние товара: ",-1))),g=s((()=>(0,n._)("br",null,null,-1))),h={class:"d-flex mt-4 flex-wrap align-content-around"},f=["onClick"],w={key:1,disabled:"true",class:"btn btn-light"},_={key:2,class:"inventory-message"},C={key:3,class:"inventory-message"},y={key:4,class:"inventory-message"},b=s((()=>(0,n._)("hr",null,null,-1)));function k(t,e,r,s,k,I){const S=(0,n.up)("Header"),D=(0,n.up)("my-header"),x=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(S),(0,n.Wm)(D),(0,n._)("main",o,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(I.sortedProducts,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t.id},[(0,n._)("div",i,[(0,n._)("div",c,[(0,n._)("figure",null,[(0,n._)("img",{class:"product",src:t.image},null,8,l)])]),(0,n._)("div",u,[(0,n._)("h3",null,[(0,n.Wm)(x,{to:{name:"ProductId",params:{id:t.id}}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(t.title),1)])),_:2},1032,["to"])]),(0,n._)("p",{innerHTML:t.description},null,8,d),(0,n._)("p",m,"Цена: "+(0,a.zw)(t.price||I.formatPrice)+" грн ",1),(0,n._)("div",p,[v,((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(5,(e=>(0,n._)("span",{class:(0,a.C_)({"rating-active":I.checkRating(e,t)}),key:e},"☆",2))),64))]),g,(0,n._)("div",h,[I.canAddToCart(t)?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn add-btn",onClick:e=>I.addToCart(t)},"Добавить в корзину ",8,f)):((0,n.wg)(),(0,n.iD)("button",w,"Добавить в корзину ")),t.availableInventory-I.cartCount(t.id)===0?((0,n.wg)(),(0,n.iD)("span",_,"Товар закончился ")):t.availableInventory-I.cartCount(t.id)<5?((0,n.wg)(),(0,n.iD)("div",C," Осталось: "+(0,a.zw)(t.availableInventory-I.cartCount(t.id))+" шт! ",1)):((0,n.wg)(),(0,n.iD)("span",y,"Купить сейчас! "))])])]),b])))),128))])])}var I=r(7433),S=r(6265),D=r.n(S),x=r(4573),T={name:"main-component",data(){return{products:[]}},components:{MyHeader:I.Z},setup(){const t=(0,x.U)();return{userStore:t}},methods:{formatPrice(t){if(!parseInt(t))return"";if(t>99999){var e=(t/100).toFixed(2),r=e.split("").reverse(),n=3;while(r.length>n+3)r.splice(n+3,0,","),n+=4;return r.reverse().join("")}return(t/100).toFixed(2)},checkRating(t,e){return e.rating-t>=0},addToCart(t){this.userStore.addToCart(t.id),localStorage.setItem("products-list",JSON.stringify(this.userStore.cartItemCount))},canAddToCart(t){return t.availableInventory>this.cartCount(t.id)},cartCount(t){let e=0;for(let r=0;r<this.userStore.cartItemCount.length;r++)this.userStore.cartItemCount[r]===t&&e++;return e}},computed:{cartItemCount(){return this.userStore.cartItemCount.length||""},sortedProducts(){function t(t,e){return t.title.toLowerCase()<e.title.toLowerCase()?-1:t.title.toLowerCase()>e.title.toLowerCase()?1:0}if(Object.keys(this.products).length>0){let e=this.products.slice(0);return e.sort(t)}return 0}},created:async function(){await D().get("products.json").then((t=>{this.products=t.data.products}));const t=localStorage.getItem("products-list");t&&(this.userStore.cartItemCount=JSON.parse(t))}},H=r(89);const L=(0,H.Z)(T,[["render",k],["__scopeId","data-v-6e86fe90"]]);var P=L}}]);
//# sourceMappingURL=main.dffd26a1.js.map